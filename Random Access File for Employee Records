#include <stdio.h>
#include <stdlib.h>

struct Employee {
    int id;
    char name[20];
    float salary;
};

int main() {
    FILE *fp;
    struct Employee e;
    int choice;

    fp = fopen("employee.dat","wb+");
    if(!fp){ printf("File error\n"); return 1; }

    while(1) {
        printf("\n1.Add Employee\n2.Display All\n3.Search by ID\n4.Exit\n");
        scanf("%d",&choice);

        if(choice==1) {
            printf("Enter ID Name Salary: ");
            scanf("%d %s %f",&e.id,e.name,&e.salary);
            fseek(fp,(e.id-1)*sizeof(e),SEEK_SET);
            fwrite(&e,sizeof(e),1,fp);
        } else if(choice==2) {
            rewind(fp);
            while(fread(&e,sizeof(e),1,fp))
                printf("ID:%d Name:%s Salary:%.2f\n",e.id,e.name,e.salary);
        } else if(choice==3) {
            int id;
            printf("Enter ID: "); scanf("%d",&id);
            fseek(fp,(id-1)*sizeof(e),SEEK_SET);
            if(fread(&e,sizeof(e),1,fp))
                printf("Found -> ID:%d Name:%s Salary:%.2f\n",e.id,e.name,e.salary);
            else printf("Not found!\n");
        } else break;
    }

    fclose(fp);
    return 0;
}
